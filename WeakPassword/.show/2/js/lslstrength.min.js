var allBars=document.querySelectorAll("div.progress-bar > div"),currentPercent=document.querySelector("div.percentage > div.digit"),inputPasswordField=document.querySelector("input.password");function detPasswordStrength(e){allBars.forEach((e=>{e.style.background="none",e.style.border="1px solid lightgrey"}));var t=getStrengthPercent(e);if(100==t)allBars.forEach((e=>{e.style.background="green",e.style.border="1px solid green"}));else if(t>=75)for(var r=0;r<3;r++)allBars[r].style.background="gold",allBars[r].style.border="1px solid gold";else if(t>=50)for(r=0;r<2;r++)allBars[r].style.background="gold",allBars[r].style.border="1px solid gold";else t>=25&&(allBars[0].style.background="red",allBars[0].style.border="red");displayPercent(t)}function displayPercent(e){var t=currentPercent.textContent,r=e;document.querySelector("div.percentage").style="";var n=setInterval((function(){t>r&&(currentPercent.innerHTML=--t),t<r&&(currentPercent.innerHTML=++t),t==r&&clearInterval(n)}),5)}function getStrengthPercent(e){var t=0;return t+=percentByLength(e),t+=percentByUppercase(e),t+=percentByChar(e),t=charRepitition(t+=percentByNum(e),e)}function percentByLength(e){return e.length>=16?25:e.length>=8?15:e.length>0?5:0}function percentByUppercase(e){var t=[];return e.split("").forEach((e=>{"ABCDEFGHIJKLMNOPQRSTUVWXYZ".includes(e)&&t.push(e)})),e.length-t.length>=e.length?0:e.length-t.length>=16?25:e.length-t.length>=8?15:e.length-t.length>0?5:0}function percentByChar(e){var t=[];return e.split("").forEach((e=>{"`,.~{}()[]/+_=-!@#$%^&*|\\'\":?".includes(e)&&t.push(e)})),e.length-t.length>=e.length?0:e.length-t.length>=16?25:e.length-t.length>=8?15:e.length-t.length>0?5:0}function percentByNum(e){var t=[];return e.split("").forEach((e=>{"1234567890".includes(e)&&t.push(e)})),e.length-t.length>=e.length?0:e.length-t.length>=16?25:e.length-t.length>=8?15:e.length-t.length>0?5:0}inputPasswordField.addEventListener("keyup",(e=>{detPasswordStrength(inputPasswordField.value)}));const showPasswordBtn=document.querySelector("div.show-pass");showPasswordBtn.addEventListener("click",(e=>{"password"==inputPasswordField.getAttribute("type")?(inputPasswordField.setAttribute("type","text"),showPasswordBtn.children[0].innerHTML="visibility_off"):(inputPasswordField.setAttribute("type","password"),showPasswordBtn.children[0].innerHTML="visibility")}));const generatePasswordBtn=document.querySelector("div.gen-pass");function charRepitition(e,t){for(var r=t.split(""),n=[],l=0;l<r.length;l++)for(var s=1;s<=2;s++){var a=l+s;if(r[l]==r[a]||r[a]==parseInt(r[l])+1){if(n.includes(r[l]))break;n.push(r[l])}}return n.length>=3?e-25:2==n.length?e-15:1==n.length?e-5:e}generatePasswordBtn.addEventListener("click",(e=>{for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZ",r=t.toLowerCase(),n="1234567890",l="`,.~{}()[]/+_=-!@#$%^&*|\\'\":?",s=[],a=0;a<3;a++){var o=Math.floor(Math.random()*t.length);s[s.length-1]!=t[o]&&s[s.length-2]!=t[o]?s.push(t[o]):--a}for(a=0;a<13;a++){o=Math.floor(Math.random()*r.length);s[s.length-1].toLowerCase()!=r[o]&&s[s.length-2].toLowerCase()!=r[o]?s.push(r[o]):--a}for(a=0;a<2;a++){o=Math.floor(Math.random()*n.length);s[s.length-1]!=n[o]&&parseInt(s[s.length-1])+1!=n[o]&&parseInt(s[s.length-1])-1!=n[o]&&parseInt(s[s.length-1])+2!=n[o]&&parseInt(s[s.length-1])-2!=n[o]?s.push(n[o]):--a}o=Math.floor(Math.random()*l.length);s.push(l[o]),inputPasswordField.value=s.join(""),detPasswordStrength(s.join(""))}));